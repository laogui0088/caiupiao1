<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>{:C('sitename')}-下注记录</title>
		<meta name="format-detection" content="telephone=no,email=no"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
		<link href="__PUBLIC__/Home/css/modern-user.css" rel="stylesheet">
	</head>
	<style type="text/css">
		:root {
			--brand-gradient: linear-gradient(135deg, #667eea, #764ba2);
			--primary-color: #667eea;
			--shadow: 0 4px 12px rgba(0,0,0,0.1);
		}
		* { box-sizing: border-box; margin: 0; padding: 0; }
		body {
			background: #f6f7fb;
			font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI','PingFang SC','Microsoft YaHei', sans-serif;
			color:#222;
			overflow-y: scroll;
			-webkit-user-select: none;
			user-select: none;
		}
		.header {
			background: var(--brand-gradient);
			color: white;
			padding: 12px 16px;
			position: fixed;
			top: 0;
			left: 0;
			right: 0;
			z-index: 100;
			box-shadow: 0 2px 10px rgba(0,0,0,0.1);
		}
		.header .all_w {
			display: flex;
			align-items: center;
			justify-content: space-between;
			max-width: 1200px;
			margin: 0 auto;
		}
		.header .ptitle {
			flex: 1;
			text-align: center;
			font-size: 18px;
			font-weight: 600;
		}
		.header .backgame {
			color: white;
			text-decoration: none;
			font-size: 14px;
			opacity: 0.9;
		}
		.header .gofh a {
			color: white;
			font-size: 24px;
			text-decoration: none;
		}
		.loginscreen {
			max-width: 1200px;
			margin: 70px auto 20px;
			padding: 16px;
		}
		.record {
			background: white;
			border-radius: 12px;
			overflow: hidden;
			box-shadow: var(--shadow);
		}
		.record-top {
			background: linear-gradient(135deg, #667eea15, #764ba215);
			padding: 16px;
		}
		.record-top .lable {
			display: flex;
			gap: 8px;
			justify-content: center;
		}
		.record-top .lable a {
			text-decoration: none;
		}
		.record-top .lable span {
			display: block;
			background: white;
			color: var(--primary-color);
			padding: 8px 16px;
			border-radius: 20px;
			font-size: 14px;
			font-weight: 600;
			border: 2px solid var(--primary-color);
			transition: all 0.3s ease;
		}
		.record-top .lable a:hover span {
			background: var(--primary-color);
			color: white;
		}
		.record-content {
			padding: 16px;
		}
		.record-content table {
			width: 100%;
			border-collapse: collapse;
			font-size: 13px;
		}
		.record-content th,
		.record-content td {
			padding: 12px 8px;
			text-align: center;
			border-bottom: 1px solid #f0f0f0;
		}
		.record-content th {
			background: #f8f9fa;
			font-weight: 600;
			color: #333;
		}
		.record-content tbody tr:hover {
			background: #f8f9fa;
		}
		
		/* 现代化分页样式 */
		.pages {
			display: flex;
			justify-content: center;
			align-items: center;
			gap: 6px;
			margin: 20px 0;
			padding: 16px;
			flex-wrap: wrap;
		}
		.pages a, .pages span {
			display: inline-flex;
			align-items: center;
			justify-content: center;
			min-width: 36px;
			height: 36px;
			padding: 0 12px;
			border: 1px solid #e8e8e8;
			border-radius: 8px;
			text-decoration: none;
			color: #666;
			font-size: 14px;
			font-weight: 500;
			background: white;
			transition: all 0.2s ease;
			box-shadow: 0 2px 4px rgba(0,0,0,0.08);
		}
		.pages a:hover {
			border-color: var(--primary-color);
			color: var(--primary-color);
			transform: translateY(-1px);
			box-shadow: 0 4px 12px rgba(102,126,234,0.2);
		}
		.pages span.current {
			background: var(--brand-gradient);
			color: white;
			border-color: transparent;
			font-weight: 600;
			box-shadow: 0 4px 12px rgba(102,126,234,0.3);
		}
		.pages .first, .pages .prev, .pages .next, .pages .end {
			font-weight: 600;
		}
		.back {
			display: block;
			width: 100%;
			height: 50px;
			line-height: 50px;
			font-size: 16px;
			text-align: center;
			color: white;
			position: fixed;
			bottom: 0;
			background: var(--brand-gradient);
			text-decoration: none;
			font-weight: 600;
			box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
		}
		.record-no {
			text-align: center;
			padding: 40px 20px;
			color: #999;
		}
		@media (max-width: 768px) {
			.pages {
				gap: 4px;
				padding: 12px 8px;
			}
			.pages a, .pages span {
				min-width: 32px;
				height: 32px;
				padding: 0 8px;
				font-size: 12px;
			}
			.record-content table {
				font-size: 11px;
			}
			.record-content th, .record-content td {
				padding: 8px 4px;
			}
		}
	</style>
	<body>
		<div class="header">
		  <div class="all_w ">
		    <div class="gofh"> <a href="javascript:history.back()"><img src="/Public/Home/img/jt_03.jpg"></a> </div>
		    <div class="ptitle">
		      下注记录
		        <a href="/" class="backgame">返回游戏</a>
		    </div>
		 
		  </div>
		</div>
		<div class=" text-center loginscreen  animated fadeInDown">
				<div class="record">
			<div class="record-top">
				<p class="lable">
					<a href="{:U('Home/User/xiazhu')}?t=1"><span>{$today|date="m-d",###}</span></a>
					<a href="{:U('Home/User/xiazhu')}?t=2"><span>{$today-86400|date="m-d",###}</span></a>
					<a href="{:U('Home/User/xiazhu')}?t=3"><span>{$today-86400*2|date="m-d",###}</span></a>
					<a href="{:U('Home/User/xiazhu')}?t=4"><span>账务</span></a>
				</p>
			</div>
			<div class="record-content">
				<empty name="list">
					<p class="record-no"><span>
						<if condition="$t eq 1">{$today|date="m-d",###}</if>
						<if condition="$t eq 2">{$today-86400|date="m-d",###}</if>
						<if condition="$t eq 3">{$today-86400*2|date="m-d",###}</if>
						 无资料
					</span></p>
					<else/>
					<if condition="$t eq 4">
						<table class="table table-striped table-hover table-bordered">
							<thead>
								<tr>
									<th>期号</th>
									<th>内容</th>
									<th>金额</th>
									<th>盈亏</th>
									<th>时间</th>
								</tr>	
							</thead>
							<tbody>
								<volist name="list" id="vo">
									<tr>
										
										<!--<td>{$vo.time|mb_substr=3,8,utf8}</td>-->
										<td>{$vo.number}</td>
										<td>{$vo.jincai}</td>
										<td>{$vo.del_points}</td>
										<td>{$vo['add_points']-$vo['del_points']}</td>
										<td>{$vo.time|date="Y-m-d H:i:s",###}</td>
										
									</tr>
								</volist>
							</tbody>
						</table>
						<else/>
						<table class="table table-striped table-hover table-bordered">
							<volist name="list1" id="vo" key="i">
								<thead>
									<tr>
										<th colspan="6">
											<?php
												$periodnumber = $vo['number'];
												$awardnumbers = M('number')->where("periodnumber = $periodnumber")->order('id desc')->find();
												$data = explode(',',$awardnumbers['awardnumbers']);
												for($i=0;$i<count($data);$i++){
													if($data[$i]<10){
														$data[$i] = substr($data[$i],1);
													}
												}
												
												?>
											<span>期号：{$vo.number}<if condition="$number eq $vo['number']">
												(未开奖)
												<else/>
												(
												<volist name="data" id="y" key="i">
													<if condition="$i eq 10">
														{$y}
														<else/>
														{$y},
													</if>
												</volist>
												)	
											</if></span>
											<!-- <if condition="$number eq $vo['number']">
												<a class="bt bt-red" onclick="del_all('{$vo.number}')">全部取消</a>
											</if> -->
										</th>
									</tr>
								</thead>
								<thead>
									<tr>
										<th>竞猜时间</th>
										<th>竞猜单号</th>
										<th>内容</th>
										<th>点数</th>
										<th>输赢</th>
									</tr>	
								</thead>
								<tbody>
									<volist name="vo.order" id="r">
										<tr>
											<td>{$r.time|date="H:i:s",###}</td>
											<td>{$r.id}</td>
											<td>{$r.jincai}</td>
											<td>{$r.del_points}</td>
											<td>
												<if condition="$number eq $vo['number']">
												<!-- 	<a class="bt bt-red" onclick="del('{$r.id}')">取消</a> -->
													<else/>
													{$r['add_points']-$r['del_points']}
												</if>
											</td>
										</tr>
									</volist>
								</tbody>
							</volist>
						</table>
					</if>
				</empty>
			</div>
			<div>
				<span>进项流水：<font color="red">{$points_tj['sum_add']|default='0'}</font></span>&nbsp;
				<span>出项流水：<font color="red">{$points_tj['sum_del']|default='0'}</font></span>&nbsp;
				<span>输赢：<font color="red">{$points_tj['ying']|default='0'}</font></span>&nbsp;
			</div>
		</div>
		
		</div>
		<div class="pages">
				{$show}
			</div>
		
		<a class="back" href="{:U('Home/Run/index')}">返回游戏</a>
		<script src='//cdn.bootcss.com/jquery/1.11.3/jquery.js'></script>
		<script src="__PUBLIC__/layer/layer.js"></script>
		<script>
			function del(id){
				layer.open({
				    content: '您确定要取消吗？'
				    ,btn: ['确认', '取消']
				    ,yes: function(index){
				      	layer.close(index);
				      	$.ajax({
	                       	url: "{:U('Home/Run/del')}",
	                       	type: "post",
	                       	data:{'id':id},
	                       	dataType:'json',
	                       	error:function(){
	                       		parent.layer.open({content: '服务器开小差了~',skin: 'msg',time: 2});
		                    },
	                       	success:function(res){
	                       		location.href=location.href;
	                       	}
	                   	});
				    }
				});
			}
			function del_all(number){
				layer.open({
				    content: '您确定要取消吗？'
				    ,btn: ['确认', '取消']
				    ,yes: function(index){
				      	layer.close(index);
				      	$.ajax({
	                       	url: "{:U('Home/Run/del_all')}",
	                       	type: "post",
	                       	data:{'number':number},
	                       	dataType:'json',
	                       	error:function(){
	                       		parent.layer.open({content: '服务器开小差了~',skin: 'msg',time: 2});
		                    },
	                       	success:function(res){
	                       		location.href=location.href;
	                       	}
	                   	});
				    }
				});
			}
		</script>
	</body>
</html>